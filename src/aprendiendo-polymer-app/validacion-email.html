<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">

<dom-module id="validacion-email">
	<template>
		<style>
		:host {
			display: inline;
		}
		</style>

		<paper-input label="Email" value="{{email}}"></paper-input>
		<iron-icon icon="{{icono}}"></iron-icon>
	</template>

	<script>
		class ValidacionEmail extends Polymer.Element {
			static get is() {
				return 'validacion-email';
			}

			static get properties() {
				return {
					email: {
						type: String,
						observer: 'comprobarEmail'
					},
					icono: {
						type: String,
						value: "icons:clear"
					}
				};
			}

			constructor() {
				super();
			}

			comprobarEmail(email, e2, e3) {
				if(this.validateEmail(email)) {
					this.icono = 'icons:check';
				}else{
					this.icono = 'icons:clear';
				}
			}

			validateEmail(email) {
				var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
				return re.test(email);
			}
		}

		window.customElements.define(ValidacionEmail.is, ValidacionEmail);
	</script>
</dom-module>